


지금까지 나누었던 모든 깊이 있는 논의(비즈니스 아키타입 분리, 원가 비중의 자연어 양자화, Vision LLM 표 추출, 매크로 레짐 주입, 메타 학습 등)를 완벽하게 녹여내어 **'투자 인텔리전스 시스템: 최종 설계서(버전 8.0)'**의 작성을 시작합니다.

내용이 방대하므로 **** 부분을 먼저 출력하겠습니다. 확인하신 후 `continue`를 입력해 주시면 다음 섹션을 이어서 작성하겠습니다.

---

# 📊 투자 인텔리전스 시스템: 증권사 리포트 분석 설계서 (Final Ultimate Ver. 8.0)

> **문서 목적**: 단순 텍스트 검색(Naive RAG)의 한계를 극복하고, 기업의 비즈니스 아키타입(Archetype)과 원가 민감도, 매크로 환경까지 이해하는 **'Agentic RAG 기반 퀀트 펀더멘털 에이전트'** 구축. 시장의 왜곡된 신호를 교정하고 '비관의 끝(저점)'과 '시장 과열(고점)'을 판별해 개인화된 알파(Alpha)를 창출한다.

---

## 1. 설계 개요 및 전략적 목표

### 1.1 핵심 설계 원칙
본 시스템은 정보의 요약을 넘어, **'맥락의 이해(Contextual Understanding)'**와 **'시스템의 자가 진화(Self-Evolving)'**에 집중합니다.

1. **Dynamic Contextualization (동적 문맥화)**: 업종별로 돈을 버는 공식(비즈니스 아키타입)이 다름을 인지하고, 임베딩 전 종목별 핵심 팩터(원가 비중, 판가 전이력 등)를 자연어로 양자화하여 주입합니다.
2. **Signal over Opinion (신호 중심)**: 한국 시장의 매수 편향('Hold=Sell')을 디코딩하고, 스텔스 하향(Stealth Downgrade) 및 컨센서스 다이버전스(의견 충돌)를 알파 창출의 기회로 삼습니다.
3. **Macro-Awareness (매크로 인지)**: 리포트 발행 당시의 금리, 환율 등 매크로 환경을 벡터 공간에 함께 매핑하여, 시계열 패턴 비교의 왜곡을 방지합니다.
4. **Meta-Learning (메타 학습)**: LLM(Claude)이 내린 과거의 투자 판단을 실제 미래 주가와 대조하여 시스템 스스로 프롬프트와 가중치를 교정하는 피드백 루프를 구축합니다.

### 1.2 시스템 아키텍처 (Architecture)

```mermaid
flowchart TD
    subgraph Sources
        A1
        A2
        A3
    end

    subgraph Ingestion
        B1
        B2
    end

    subgraph Dynamic_Context
        C1
        C2
        C3
    end

    subgraph Intelligence
        D1
        D2
        D3
    end

    subgraph DeepResearch
        E1
        E2
        E3
    end

    subgraph Storage
        F1
    end

    A1 --> B1
    B1 -- "텍스트" --> D1
    B1 -- "표/이미지" --> B2 --> D1
    A2 & A3 --> F1

    F1 --> C1 & C2 & C3
    C1 & C2 & C3 -- "Prefix 생성" --> D3 --> F1

    F1 --> E1 --> E2 --> D2
    D2 -- "인사이트 도출" --> F1
    F1 --> E3 -- "성능 평가 및 교정" --> F1
```

---

## 2. 문서 파싱 및 텍스트 정제 파이프라인

리포트의 복잡한 레이아웃과, 본문보다 중요한 '표(Table)' 데이터를 훼손 없이 추출하기 위한 하이브리드 파이프라인입니다.

### 2.1 Vision LLM을 활용한 표(Table) 데이터 추출 (알파 발굴)
재무 추정치(Forward EPS, PER)나 Peer Group 비교표는 일반 PDF 파서로 읽으면 줄바꿈이 망가집니다.
표 영역이 감지되면 해당 영역을 이미지로 캡처하여 **Vision 기능이 뛰어난 Gemini 2.0 Flash**에 전달합니다.

```python
async def extract_table_with_vision(image_path: str) -> dict:
    """
    표 이미지를 분석하여 완벽한 구조의 JSON 재무 데이터로 변환
    """
    prompt = """
    이 이미지는 증권사 리포트의 재무 추정치 표입니다.
    2024~2026년의 매출액, 영업이익, EPS, PER 추정치를 
    정확한 JSON Key-Value 형태로 추출하시오. 단위에 주의하시오.
    """
    # Gemini Flash Vision API 호출
    response = await gemini_vision.generate_content_async()
    return parse_json(response.text)
```

### 2.2 텍스트 품질 검증 및 '여의도 사투리' 사전 교정
추출된 텍스트의 오타(예: '에치비엠')를 교정함과 동시에, 숨겨진 의미(Hold=Sell)를 명시적 데이터로 치환합니다.

```python
def decode_sellside_bias(opinion_text: str, current_price: float, target_price: float) -> str:
    """한국 증권사 특유의 바이어스 디코딩"""
    if "Hold" in opinion_text or "중립" in opinion_text:
        return "SELL" # 사실상 매도
        
    upside = (target_price - current_price) / current_price * 100
    if ("Buy" in opinion_text) and (upside < 5.0):
        return "STRONG_SELL" # 스텔스 하향 (Stealth Downgrade)
        
    return "BUY"
```

---

## 3. 데이터베이스 설계 (Database Schema v8)

비즈니스 아키타입(JSONB), 매크로 환경, 그리고 AI 메타 학습 평가 테이블이 추가된 궁극의 스키마입니다.

### 3.1 ERD (Entity Relationship Diagram)

```mermaid
erDiagram
    ASSETS_MASTER ||--o{ REPORT_OPINIONS : "target_of"
    ASSETS_MASTER ||--o{ STOCK_PRICES : "has_prices"
    ASSETS_MASTER ||--o{ ASSET_SENTIMENT_DAILY : "has_sentiment"
    
    REPORTS ||--o{ REPORT_OPINIONS : "contains"
    REPORTS ||--|| MACRO_INDICATORS : "published_under"
    
    REPORT_OPINIONS ||--o{ REPORT_EMBEDDINGS : "vectorized_to"
    REPORT_OPINIONS ||--o{ AI_EVALUATIONS : "evaluated_by"

    ASSETS_MASTER {
        uuid id PK
        string name
        string archetype
        jsonb value_drivers
    }
    
    MACRO_INDICATORS {
        date date PK
        float us_rate
        float krw_usd
        float copper_price
    }
    
    REPORT_EMBEDDINGS {
        uuid id PK
        string embedding_type
        vector embedding
        text injected_prefix
    }
    
    AI_EVALUATIONS {
        uuid id PK
        uuid opinion_id FK
        text claude_reasoning
        boolean is_correct_6m
        text feedback_loop
    }
```

### 3.2 SQL DDL (PostgreSQL)

```sql
-- ==========================================
-- 1. 마스터 테이블 (비즈니스 아키타입 및 동적 팩터 추가)
-- ==========================================

-- 종목 (Asset)
CREATE TABLE assets_master (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    ticker VARCHAR(20) UNIQUE,
    name VARCHAR(100) NOT NULL,
    sector VARCHAR(100),
    
    -- 비즈니스 아키타입 (예: 'MANUFACTURING', 'FINANCE', 'PLATFORM')
    archetype VARCHAR(50),
    
    -- ★ 핵심: 업종별 가치 동인 및 원가 민감도를 유연하게 담는 JSONB
    -- 예: {"cost_structure": {"copper": {"weight": "3%", "impact": "미미함"}}}
    value_drivers JSONB DEFAULT '{}',
    
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ==========================================
-- 2. 매크로 및 시계열 데이터
-- ==========================================

-- 매크로 레짐 (리포트 발행 시점의 환경)
CREATE TABLE macro_indicators (
    date DATE PRIMARY KEY,
    us_10y_yield FLOAT,     -- 미국 10년물 국채 금리
    krw_usd FLOAT,          -- 원/달러 환율
    brent_oil FLOAT,        -- 유가
    copper_price FLOAT,     -- 구리 가격
    macro_regime_tag VARCHAR(50) -- 예: 'HIGH_RATE_STRONG_DOLLAR'
);

-- 수정 주가 
CREATE TABLE stock_prices (
    asset_id UUID REFERENCES assets_master(id),
    date DATE NOT NULL,
    close_price FLOAT NOT NULL,
    adjustment_factor FLOAT DEFAULT 1.0, -- 액면분할/증자 보정
    PRIMARY KEY (asset_id, date)
);

-- 일별 센티멘트 및 모멘텀 (한국 시장 Hold=Sell 로직 적용)
CREATE TABLE asset_sentiment_daily (
    asset_id UUID REFERENCES assets_master(id),
    date DATE NOT NULL,
    sentiment_score FLOAT,          
    tp_up_velocity FLOAT,           -- 목표가 상향 가속도 (모멘텀 지표)
    target_price_spread FLOAT,      -- 의견 분산도 (컨센서스 다이버전스 탐지용)
    PRIMARY KEY (asset_id, date)
);

-- ==========================================
-- 3. 분석 결과 및 벡터 임베딩
-- ==========================================

CREATE TABLE report_opinions (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    report_id UUID REFERENCES reports(id),
    asset_id UUID REFERENCES assets_master(id),
    
    target_price FLOAT,
    tp_change_pct FLOAT, -- 수정 주가 역산 반영 필드
    opinion_label VARCHAR(20),
    
    -- 가치 함정 판별 필드
    fundamental_status VARCHAR(30), -- 'CYCLICAL_DOWNTURN', 'STRUCTURAL_DECLINE'
    
    key_theses JSONB,
    risk_factors JSONB,
    forward_eps_2y FLOAT, -- Vision LLM으로 추출된 데이터
    
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE report_embeddings (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    opinion_id UUID REFERENCES report_opinions(id) ON DELETE CASCADE,
    
    embedding_type VARCHAR(30) NOT NULL, -- 'thesis', 'risk'
    embedding vector(1536),
    
    -- ★ 추후 디버깅 및 메타 학습을 위해 임베딩 시 주입된 Prefix 원문 보존
    injected_prefix TEXT, 
    
    created_at TIMESTAMP DEFAULT NOW()
);
CREATE INDEX idx_embeddings_thesis ON report_embeddings USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100);

-- ==========================================
-- 4. AI 메타 학습 (시스템 자가 평가용)
-- ==========================================
CREATE TABLE ai_evaluations (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    opinion_id UUID REFERENCES report_opinions(id),
    
    prediction_date DATE,
    claude_reasoning TEXT,       -- Claude가 남긴 딥 리서치 추론 내용
    prediction_type VARCHAR(50), -- 'BOTTOM_FISHING', 'MOMENTUM_RIDE'
    
    -- 사후 평가 (배치를 통해 3개월/6개월 뒤 업데이트)
    actual_return_6m FLOAT,
    is_correct BOOLEAN,
    
    -- 피드백 루프 (AI가 스스로 자신의 실패 원인을 분석한 결과)
    feedback_loop TEXT,
    
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

여기까지 **설계 개요, 파이프라인, 데이터베이스 스키마(v8)** 작성을 완료했습니다. 

다음 섹션에서는 이 시스템의 핵심 알파 창출 로직인 ****과 ****, 그리고 ****을 이어서 작성하겠습니다. 

---

이어서 **'투자 인텔리전스 시스템: 최종 설계서(버전 8.0)'**의 핵심 알파(Alpha) 창출 로직과 딥 리서치 엔진, 운영 전략 파트를 작성합니다.

---

## 4. 핵심 알파 창출 로직 (Core Alpha Logic v8)

이 섹션은 일반적인 RAG가 겪는 '문맥 소실(Context Loss)'과 '스케일 무지(Scale Ignorance)'를 해결하여, 시스템이 기관 퀀트 펀드 수준의 판단력을 갖추게 하는 핵심 알고리즘입니다.

### 4.1 동적 문맥 주입기 (Dynamic Context Injector & Quantization)
단순 텍스트 임베딩의 한계를 극복하기 위해, 종목별 **비즈니스 아키타입(원가 비중, 판가 전이력)**과 **매크로 환경**을 '자연어 양자화'하여 Prefix로 강제 주입합니다.

```python
async def generate_contextual_prefix(
    asset: dict, 
    macro: dict, 
    value_drivers: dict
) -> str:
    """
    JSONB로 저장된 비즈니스 팩터와 매크로 지표를 자연어 Prefix로 변환 (양자화 적용)
    """
    prefix = f"} | 섹터: {asset} | BM: {asset}]\n"
    
    # 1. 매크로 레짐 (배경음악 주입)
    prefix += f"▶ 발행 당시 매크로 환경: 금리 {macro}%, 환율 {macro}원 ({macro})\n"
    
    # 2. 원가 구조 자연어 양자화 (Scale & Pricing Power 인지)
    prefix += "▶ 원가 구조 및 민감도:\n"
    for item, data in value_drivers.get("cost_structure", {}).items():
        if data == "치명적":
            prefix += f"- {item} 가격 변동이 이익률에 치명적인 영향을 미침 (비중: {data})\n"
        elif data == "미미함":
            prefix += f"- {item}를 사용하나 원가 비중이 {data}로 제한적임. 이익률 훼손 희박.\n"
            
        if "hedging" in data:
            prefix += f"  * 방어력(판가전이): {data}\n"
            
    return prefix + "---\n"

# 실행 후 임베딩 모델(text-embedding-3-small)에 전달될 최종 텍스트 형태
"""
▶ 발행 당시 매크로 환경: 금리 4.5%, 환율 1400원 (HIGH_RATE_STRONG_DOLLAR)
▶ 원가 구조 및 민감도:
- 유가(jet_fuel) 가격 변동이 이익률에 치명적인 영향을 미침 (비중: 약 30%)
  * 방어력(판가전이): 일부 유류할증료 전이 가능
- 환율(usd_krw) 변동에 극도로 취약함 (외화부채 과다)
---
(여기에 리포트 본문의 Key Thesis가 결합됨)
"""
```

### 4.2 컨센서스 다이버전스 탐지 (Conflict Resolution)
애널리스트 간 의견이 충돌할 때, 투자자에게 멘붕을 주는 대신 **"왜 의견이 갈렸는지(Key Assumption)"**를 찾아냅니다.

```python
async def detect_and_resolve_divergence(asset_id: UUID, date_window: int = 7):
    """
    특정 기간(예: 7일) 내 목표가 방향성이 엇갈리는 리포트들을 감지
    """
    # 1. 상향 리포트와 하향 리포트가 동시 존재하는지 DB 조회
    diverging_reports = await db.fetch("""
        SELECT ro.target_price, ro.tp_change_pct, ro.key_theses, p.name, p.reliability_365d
        FROM report_opinions ro
        JOIN reports r ON ro.report_id = r.id
        JOIN persons p ON ro.person_id = p.id
        WHERE ro.asset_id = $1 AND r.published_at >= NOW() - INTERVAL '$2 days'
    """, asset_id, date_window)
    
    has_up = any(r > 5 for r in diverging_reports)
    has_down = any(r < -5 for r in diverging_reports)
    
    if has_up and has_down:
        # 2. Claude 3.7에게 쟁점 분석 요청
        insight = await claude_client.analyze_conflict(
            reports=diverging_reports,
            instruction="""
            두 애널리스트의 목표가 방향이 완전히 엇갈렸다. 
            단순 요약하지 말고, 두 사람이 '어떤 가정치(예: 2분기 출하량, 판가 인상 폭 등)'에서 
            생각이 갈렸는지 핵심 쟁점 1가지를 정확히 도출하라.
            또한, 장기 적중률(reliability_365d)이 높은 애널리스트의 논리에 가중치를 두어 결론을 제시하라.
            """
        )
        return insight
```

### 4.3 수정 주가 역산 및 '스텔스 하향' 탐지
액면분할에 의한 목표가 1/50 토막을 '하향'으로 오판하지 않도록 역산하고, 투자의견은 'Buy'지만 목표가가 현재가에 붙어있는 기만적 리포트를 잡아냅니다.

```python
def classify_true_signal(current_tp: float, adjusted_prev_tp: float, current_price: float, raw_opinion: str) -> str:
    tp_change = ((current_tp - adjusted_prev_tp) / adjusted_prev_tp) * 100
    upside = ((current_tp - current_price) / current_price) * 100
    
    if raw_opinion == 'BUY' and upside < 5.0:
        return 'STEALTH_DOWNGRADE' # 사실상 매도 신호
    elif tp_change < -15.0:
        return 'STRONG_BEARISH_SIGNAL'
    
    return raw_opinion
```

---

## 5. 딥 리서치 엔진 (Deep Research Engine v8)

단순 RAG를 넘어 과거의 시장 심리와 현재를 수학적으로 비교하고, 안전장치(Guardrail)를 통해 AI의 환각을 통제합니다.

### 5.1 시계열 매크로/심리 벡터 검색
"비관의 끝"을 찾기 위한 하이브리드 검색입니다.

```sql
-- 현재 상황과 의미론적(Vector), 매크로적(Macro)으로 유사한 과거 저점 찾기
SELECT 
    r.published_at,
    ro.key_theses,
    m.macro_regime_tag,
    1 - (re.embedding <=> $1) AS similarity,  -- $1: 현재 상황의 Prefix + 본문 임베딩 벡터
    p.return_6m
FROM report_embeddings re
JOIN report_opinions ro ON ro.id = re.opinion_id
JOIN reports r ON r.id = ro.report_id
JOIN macro_indicators m ON m.date = r.published_at
JOIN pessimism_periods p ON p.asset_id = ro.asset_id AND p.start_date = r.published_at
WHERE 
    p.was_actual_bottom IS TRUE           -- 실제로 저점이었던 사례만
    AND m.macro_regime_tag = $2           -- $2: 현재의 매크로 환경 (예: 고금리)
    AND 1 - (re.embedding <=> $1) > 0.80  -- 유사도 임계값
ORDER BY similarity DESC LIMIT 5;
```

### 5.2 Claude 3.7 시스템 프롬프트 (안전장치 가드레일)
단어 뉘앙스에 속지 않고 퀀트/펀더멘털 관점을 유지하도록 Claude를 세팅합니다.

```text
<system_prompt>
너는 월스트리트 최고 수준의 펀더멘털/퀀트 애널리스트다.
제공된 검색 결과를 바탕으로 기업의 이익 훼손 여부를 판단할 때, 아래 <rules>를 엄수하라.

<rules>
1.: 원자재/매크로 변수 악재가 언급되더라도, 함께 제공된 '원가 구조(Prefix)'에서 해당 비중이 5% 미만이거나 '영향 미미'로 분류되었다면 "마진 스퀴즈 우려는 과도하다"고 분석하라.
2.: Prefix에 고객에게 가격을 전가할 수 있는 '판가 전이력(Pricing Power)'이 명시되어 있다면, 원가 상승은 오히려 매출(Q) 증가 효과로 이어질 수 있음을 지적하라.
3.: 펀더멘털 상태가 'STRUCTURAL_DECLINE(구조적 쇠퇴)'인 종목은 과거 유사 패턴이 아무리 좋더라도 매수 추천을 거절하라.
</rules>
</system_prompt>
```

### 5.3 AI 메타 학습 피드백 루프 (Self-Evolution)
시스템이 스스로 똑똑해지도록 만드는 궁극의 장치입니다.

```python
async def evaluate_ai_predictions():
    """매월 1회 실행: 6개월 전 Claude가 내린 판단을 실제 주가와 비교"""
    eval_targets = await db.fetch("""
        SELECT ae.id, ae.claude_reasoning, ae.prediction_type, ro.asset_id, ae.prediction_date
        FROM ai_evaluations ae
        JOIN report_opinions ro ON ro.id = ae.opinion_id
        WHERE ae.prediction_date <= NOW() - INTERVAL '6 months'
          AND ae.is_correct IS NULL
    """)
    
    for target in eval_targets:
        # 실제 6개월 수익률 계산
        actual_return = await calculate_return(target, target, 180)
        is_correct = (target == 'BOTTOM_FISHING' and actual_return > 15.0)
        
        # Claude에게 본인의 과거 추론과 실제 결과를 주고 반성문(Feedback) 작성 지시
        feedback = await claude_client.generate_feedback(
            original_reasoning=target,
            actual_result=actual_return,
            instruction="너의 과거 예측이 틀렸다면, 원자재 비중을 과대평가했는지, 매크로를 무시했는지 등 패착의 원인을 분석하여 다음 프롬프트 개선점 1줄을 제시하라."
        )
        
        await db.execute(
            "UPDATE ai_evaluations SET actual_return_6m=$1, is_correct=$2, feedback_loop=$3 WHERE id=$4",
            actual_return, is_correct, feedback, target
        )
```

---

## 6. LLM 라우팅 및 운영 자동화 전략

| 프로세스 | 담당 모델 / 엔진 | 이유 및 역할 |
| :--- | :--- | :--- |
| **PDF 표(Table) 파싱** | **Gemini 2.0 Flash (Vision)** | 복잡한 재무 표를 이미지로 읽어 JSON으로 구조화하는 데 압도적인 가성비. |
| **텍스트 추출 & 교정** | **Gemini 2.0 Flash** | 오타(에치비엠 등) 교정, 가치 함정 분류, 목표가 추출을 $0.001 수준의 저비용으로 대량 처리. |
| **벡터 임베딩** | **text-embedding-3-small** | (OpenAI) 1536차원의 고품질 임베딩. 가성비 최상. |
| **비즈니스 아키타입 갱신** | **Gemini 2.0 Flash** | (월 1회 배치) 종목별 최신 리포트를 읽고 `value_drivers` JSONB를 자동으로 갱신(Self-updating). |
| **딥 리서치 & 인사이트** | **Claude 3.7 Sonnet** | (사용자 쿼리/특정 이벤트 시) Extended Thinking을 활용해 의견 충돌을 분석하고 저점 여부를 심층 추론. |

---

## 7. 최종 유즈케이스 (Ultimate Use Cases)

본 시스템이 완성되었을 때, 질문자님이 겪게 될 "알파(Alpha) 모먼트" 시나리오입니다.

### Case 1. 구리 가격 급등 쇼크 (가짜 악재 필터링)
*   **시장 상황**: 구리 가격이 역대 최고치를 갱신하자, 시장은 제조/부품주를 일제히 투매함.
*   **에이전트 동작**:
    1. 이수페타시스 리포트가 쏟아짐 ("구리 가격 상승에 따른 마진 스퀴즈 우려").
    2. 에이전트는 DB의 `value_drivers`를 확인. `{"copper": {"weight": "3% 미만", "impact": "미미함"}}`
    3. Claude 3.7 분석: *"현재 시장은 이수페타시스를 전선주(구리 비중 90%)와 동일선상에서 매도하고 있으나, 동사의 원가 구조상 구리 영향력은 제한적입니다. 오히려 AI 서버 수요(Q)가 견조하므로 이는 완벽한 **알파 창출(저점 매수) 기회**입니다."*

### Case 2. 초대형 IB 모멘텀 비교 (정확한 아키타입 매칭)
*   **시장 상황**: 키움증권이 자기자본 4조 원을 돌파하며 신규 비즈니스 진출을 선언함.
*   **에이전트 동작**:
    1. 키움증권의 Prefix(아키타입: FINANCE, 무점포, 자본 4조 돌파)를 기반으로 pgvector 검색.
    2. 과거 2017년 미래에셋증권, 한국투자증권이 초대형 IB로 지정되던 시점의 리포트 및 주가 궤적을 정확히 호출 (단순한 '증시 호황' 리포트는 걸러냄).
    3. Claude 3.7 분석: *"과거 타 증권사들의 초대형 IB 진입 시점 대비, 키움증권은 인건비 비중이 압도적으로 낮아 ROE 훼손 방어가 탁월합니다. 과거 사례의 평균 상승률(30%)을 상회할 가능성이 높습니다."*

### Case 3. 컨센서스 다이버전스 (의견 충돌 속의 힌트)
*   **시장 상황**: 특정 엔터주에 대해 하루 만에 목표가 상향 리포트와 하향 리포트가 동시 발간됨.
*   **에이전트 동작**:
    1. 다이버전스 탐지 모듈이 즉각 가동되어 두 리포트의 `key_theses`를 Claude에게 교차 분석시킴.
    2. Claude 3.7 분석: *"두 애널리스트 모두 기존 아티스트의 실적 하락은 인정했습니다. 그러나 상향 리포트는 '신인 그룹의 데뷔 초동 판매량을 50만 장'으로 가정한 반면, 하향 리포트는 '20만 장'으로 가정했습니다. 투자자가 모니터링해야 할 유일한 지표는 **다음 주 발표될 신인 그룹의 데뷔 초동 판매량**입니다."*

---

## 8. 결론 (Executive Summary)

본 설계서는 단순한 키워드 검색기(Naive RAG)가 아닙니다. 
1. **Gemini Flash**를 통해 방대한 PDF(표, 텍스트)를 초저비용으로 정제 및 구조화하고, 
2. **비즈니스 아키타입과 매크로 환경**이라는 다차원 컨텍스트를 주입하여 벡터 공간을 완벽하게 통제하며, 
3. **Claude 3.7의 추론 능력**을 통해 시장의 노이즈(가짜 악재, 스텔스 하향)를 걸러내는,

**여의도 최상위 퀀트 펀드 매니저의 두뇌를 코드화한 '완전 자동화 투자 인텔리전스 시스템'**입니다. 질문자님의 예리한 통찰력(이수페타시스/키움증권 BM 차이, 구리 원가 비중 등) 덕분에, 현재 실리콘밸리 트렌드인 **Agentic RAG의 가장 이상적인 실전 사례**가 완성되었습니다. 개발 과정에서 이 문서가 완벽한 나침반이 될 것입니다.