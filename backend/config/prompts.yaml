# LLM Prompts

# System Prompts
system:
  daily_report: |
    당신은 개인 투자 비서입니다. 오늘의 데이터를 종합해서 리포트를 작성해주세요.
    톤: 간결하고 직관적. 불필요한 수식어 제거. 데이터 중심.
    형식: 마크다운.

  weekly_report: |
    당신은 개인 투자 분석가입니다. 주간 데이터를 심층 분석해서 리포트를 작성해주세요.
    과거 데이터와 비교하고, 패턴을 찾아내세요.
    톤: 분석적이고 통찰력 있음.
    형식: 마크다운.

  classify_thought: |
    사용자의 투자 관련 생각을 분류해주세요.
    출력 형식: JSON
    필드: type (market_view, stock_idea, risk_concern, ai_insight, content_note, general),
          tags (배열),
          tickers (종목코드 배열)

  morning_briefing: |
    당신은 아침 투자 브리핑 전문가입니다.
    미국장 결과, 오늘 예정된 이벤트, 밤새 수집된 콘텐츠를 요약해주세요.
    톤: 빠르고 핵심적.
    형식: 마크다운.

  answer_question: |
    당신은 투자 전문가입니다. 사용자의 질문에 관련 컨텍스트를 바탕으로 답변해주세요.
    과거 생각, 관련 콘텐츠, 현재 포트폴리오 상황을 고려하세요.
    톤: 전문적이고 도움이 됨.
    형식: 마크다운.

# User Prompts
user:
  daily_report: |
    ## 포트폴리오 현황
    {portfolio}

    ## 오늘 수집된 콘텐츠 요약
    {contents}

    ## 오늘 내가 기록한 생각들
    {thoughts}

    ## 요청사항
    1. 포트폴리오 일일 성과 요약 (총 수익률, 주요 변동)
    2. 콘텐츠에서 내 포트폴리오에 영향을 줄 수 있는 정보 하이라이트
    3. 내 생각/메모 중에서 액션이 필요한 것 체크
    4. 내가 과거에 기록한 생각과 오늘의 시장 움직임 비교
    5. 내일 체크해야 할 것들 리스트
    6. 리스크 경고 (있다면)

  weekly_report: |
    ## 주간 포트폴리오 성과
    {snapshots}

    ## 주간 생각들
    {thoughts}

    ## 주간 콘텐츠
    {contents}

    ## 과거 유사 시기의 생각
    {similar_past}

    ## 요청사항
    1. 주간 수익률 분석 및 요인
    2. 생각의 변화 타임라인
    3. 콘텐츠에서 발견된 중요 트렌드
    4. 포트폴리오 리밸런싱 제안
    5. 다음 주 주요 관심 포인트

# Temporal Signal Decomposition Prompts
temporal:
  system: |
    당신은 주가 변동 요인 분석 전문가입니다.
    주가 변동을 단기(1주일 이내), 중기(1주일~3개월), 장기(3개월 이상) 요인으로 분해하여 분석하세요.
    각 시간대별로 영향력 있는 요인을 식별하고, 그 중요도를 평가하세요.
    톤: 분석적이고 객관적.
    형식: JSON.

  short_term_analysis: |
    ## 단기 주가 변동 분석 (1주일 이내)
    
    ### 종목 정보
    종목코드: {ticker}
    종목명: {company_name}
    이벤트일자: {event_date}
    주가 변동률: {price_change_pct}%
    
    ### 매크로 환경
    {macro_context}
    
    ### 수급 데이터
    {supply_demand_data}
    
    ### 최근 공시/뉴스 (최근 7일)
    {recent_news}
    
    ### 시장 심리 지표
    {sentiment_indicators}
    
    ### 요청사항
    다음 JSON 형식으로 단기 요인을 분석하세요:
    {{
      "primary_factor": "주요 요인 (예: 외국인 순매수, 호재성 뉴스, 매크로 충격 등)",
      "secondary_factors": ["2차 요인들"],
      "supply_demand": {{
        "foreigner_net": "외국인 순매수 추이",
        "institution_net": "기관 순매수 추이",
        "retail_net": "개인 순매수 추이",
        "short_selling": "공매도 동향"
      }},
      "market_sentiment": "시장 심리 (bullish/bearish/neutral)",
      "impact_score": 0.0~1.0 (단기 요인의 영향력 점수),
      "confidence": 0.0~1.0 (분석 확신도)
    }}

  medium_term_analysis: |
    ## 중기 주가 변동 분석 (1주일~3개월)
    
    ### 종목 정보
    종목코드: {ticker}
    종목명: {company_name}
    분석 기간: {analysis_period}
    
    ### 실적 리비전 동향
    {earnings_revision}
    
    ### 섹터 로테이션
    {sector_rotation}
    
    ### 최근 실적 발표 (최근 3개월)
    {recent_earnings}
    
    ### 애널리스트 의견 변화
    {analyst_opinions}
    
    ### 요청사항
    다음 JSON 형식으로 중기 요인을 분석하세요:
    {{
      "primary_factor": "주요 요인 (예: 실적 리비전, 섹터 모멘텀, 밸류에이션 재평가 등)",
      "secondary_factors": ["2차 요인들"],
      "earnings_revision": {{
        "trend": "up/down/stable",
        "key_drivers": ["실적 리비전 주요 원인들"]
      }},
      "sector_momentum": "섹터 모멘텀 (strong/moderate/weak)",
      "valuation": "밸류에이션 상태 (undervalued/fair/overvalued)",
      "impact_score": 0.0~1.0 (중기 요인의 영향력 점수),
      "confidence": 0.0~1.0 (분석 확신도)
    }}

  long_term_analysis: |
    ## 장기 주가 변동 분석 (3개월 이상)
    
    ### 종목 정보
    종목코드: {ticker}
    종목명: {company_name}
    
    ### 구조적 경쟁력
    {structural_competitiveness}
    
    ### 시장 점유율 추이
    {market_share}
    
    ### 산업 구조 변화
    {industry_structure}
    
    ### 기술/사업 모델 혁신
    {innovation}
    
    ### 요청사항
    다음 JSON 형식으로 장기 요인을 분석하세요:
    {{
      "primary_factor": "주요 요인 (예: 시장 점유율 확대, 기술 우위, 산업 성장성 등)",
      "secondary_factors": ["2차 요인들"],
      "structural_advantage": {{
        "type": "cost_leadership/differentiation/focus/none",
        "sustainability": "high/medium/low",
        "key_factors": ["경쟁 우위 핵심 요인들"]
      }},
      "market_position": {{
        "share_trend": "increasing/stable/decreasing",
        "competitive_landscape": "경쟁 환경 설명"
      }},
      "growth_potential": "성장 잠재력 (high/medium/low)",
      "impact_score": 0.0~1.0 (장기 요인의 영향력 점수),
      "confidence": 0.0~1.0 (분석 확신도)
    }}

  comprehensive_analysis: |
    ## 종합 주가 변동 분석
    
    ### 종목 정보
    종목코드: {ticker}
    종목명: {company_name}
    이벤트일자: {event_date}
    주가 변동률: {price_change_pct}%
    
    ### 단기 분석 결과
    {short_term_result}
    
    ### 중기 분석 결과
    {medium_term_result}
    
    ### 장기 분석 결과
    {long_term_result}
    
    ### 요청사항
    위 세 가지 시간대별 분석 결과를 종합하여, 전체 주가 변동에 대한 균형된 시각을 제시하세요.
    다음 JSON 형식으로 응답하세요:
    {{
      "dominant_timeframe": "short/medium/long",
      "dominant_factor": "가장 영향력이 큰 요인",
      "attribution_breakdown": {{
        "short_term": 0.0~1.0,
        "medium_term": 0.0~1.0,
        "long_term": 0.0~1.0
      }},
      "key_insights": ["주요 인사이트들"],
      "risk_factors": ["리스크 요인들"],
      "investment_implication": "투자 시사점",
      "overall_confidence": 0.0~1.0
    }}

# Enhanced Report Prompts (Sprint 5)
  comprehensive_report: |
    당신은 종합 투자 분석 전문가입니다.
    1차 데이터(공시, 실적발표), 시계열 가격 분석, 투자 가정 추적 등 모든 데이터를 통합하여 심층 분석 리포트를 작성해주세요.
    톤: 전문적이고 통찰력 있음. 데이터 기반의 객관적 분석.
    형식: 마크다운.

  daily_report_enhanced: |
    당신은 개인 투자 비서입니다.
    1차 데이터, 시계열 분석, 투자 가정 등을 통합하여 일일 리포트를 작성해주세요.
    톤: 간결하고 직관적. 불필요한 수식어 제거. 데이터 중심.
    형식: 마크다운.

# Enhanced Report User Prompts (Sprint 5)
user:
  comprehensive_report: |
    ## 포트폴리오 현황
    {portfolio}

    ## 최근 수집된 콘텐츠 (7일)
    {contents}

    ## 최근 기록한 생각들 (7일)
    {thoughts}

    ## 1차 데이터 소스 (최근 30일)
    {primary_sources}

    ## 시계열 가격 분석 (최근 30일)
    {temporal_analysis}

    ## 투자 가정 (Assumptions)
    {assumptions}

    ## 분석 일자
    {date}

    ## 요청사항
    1. 포트폴리오 성과 심층 분석 (수익률, 변동성, 종목별 기여도)
    2. 1차 데이터(공시, 실적발표) 기반의 기업 분석
    3. 시계열 분석을 통한 가격 변동 요인의 시간대별 분해
    4. 투자 가정의 정확도 추이 분석 및 패턴 파악
    5. 검증 대기 중인 가정의 중요도 평가
    6. 종합적인 투자 전략 제언
    7. 포트폴리오 리밸런싱 제안 (필요시)
    8. 리스크 요인 식별 및 대응 전략

  daily_report_enhanced: |
    ## 포트폴리오 현황
    {portfolio}

    ## 오늘 수집된 콘텐츠 요약
    {contents}

    ## 오늘 내가 기록한 생각들
    {thoughts}

    ## 1차 데이터 소스 (공시, 실적발표)
    {primary_sources}

    ## 시계열 가격 분석 (가격 변동 원인 분석)
    {temporal_analysis}

    ## 투자 가정 (Assumptions)
    {assumptions}

    ## 요청사항
    1. 포트폴리오 일일 성과 요약
    2. 1차 데이터(공시, 실적발표)에서 중요한 인사이트 추출
    3. 시계열 분석 결과를 바탕으로 최근 가격 변동의 원인 분석
    4. 검증 대기 중인 투자 가정 중 주요 사항 확인
    5. 검증 완료된 가정의 정확도 분석
    6. 종합적인 투자 시사점 제시
    7. 리스크 경고 (있다면)
